CREATE TABLE IF NOT EXISTS ratings(
rating_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
rating_name VARCHAR NOT NULL
);

CREATE TABLE IF NOT EXISTS films(
film_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
rating_id INTEGER REFERENCES ratings (rating_id),
name VARCHAR NOT NULL,
description VARCHAR,
release_date DATE CHECK release_date > '1895-12-28',
duration INTEGER CHECK duration > 0
);

CREATE TABLE IF NOT EXISTS genres(
genre_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
genre_name VaRCHAR NOT NULL
);

CREATE TABLE IF NOT EXISTS film_genres(
film_id INTEGER REFERENCES films (film_id),
genre_id INTEGER REFERENCES genres (genre_id)
);

CREATE TABLE IF NOT EXISTS users(
user_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
email VARCHAR NOT NULL,
login VARCHAR NOT NULL,
name VARCHAR,
birthday DATE NOT NULL
);

CREATE TABLE IF NOT EXISTS likes(
film_id INTEGER REFERENCES films (film_id),
user_id INTEGER REFERENCES users (user_id)
);

CREATE TABLE IF NOT EXISTS friends(
user_id INTEGER REFERENCES users (user_id),
friend_id INTEGER REFERENCES users (user_id),
status boolean
);

